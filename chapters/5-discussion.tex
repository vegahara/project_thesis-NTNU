\chapter{Discussion}

This chapter will discuss the results from the proposed landmark detectors and the quality indicator. In addition, a comparison of the two landmark detectors will be presented. 

\section{Quality Indicator for Side Scan Sonar}

The proposed quality indicator can give a good indication of how turning the AUV affects the quality of the SSS data, and it is evident in the data that there are fewer landmarks at the turning places and that the few landmarks are distorted by the motion of the AUV. In the right part of \cref{fig:path_and_quality_ind}, the black lines loosely divide the sonar image into good and poor-quality parts. The first to notice in the parts of poor quality, most of the landmarks appear to be, as expected, distorted. At around a traveled distance of $60 m$, a banana-formed landmark appears in both the left and right swath. Again at a traveled distance of about $180 m$, a weak banana-formed landmark appears again in the right swath. In the left swath, a more extended landmark and two small landmarks appear. It is hard to tell whether or not the more extended landmark is distorted, but the two small landmarks do not appear distorted. Here the quality indicator is of good help, pointing out that these landmarks most likely will have some distortions. 

Even though the quality indicator can point out where distortion and poor quality can appear due to swath overlapping, it will to a lesser degree, be able to point out if we will experience distortions due to weak turning, change in speed, or a change in roll angle. Looking at \cref{fig:path_and_quality_ind} again, we can see that after turns one and three, there is a section where the AUV is straightening up and performing a weaker turn to approach its path. Looking at the corresponding parts of the right-side sonar image, it is evident that the image appears torn and much of the contrast disappears, especially in the left swath. The quality indicator marks a few swaths as weak yellow, but it is not a clear indicator of the torn image. In addition, since speed is not directly incorporated and roll isn't incorporated in the quality indicator, it will not be able to detect distortions from changes in these. 

\section{1D Landmark Detector using Peak Detection}

As shown in \cref{fig:1D_norm_result_test}, the 1D landmark detector can detect some landmarks consistently, but most are not consistently detected. The top six landmarks are not close to being consistently detected. For the last six at the bottom, two landmarks are not consistently detected, giving only a third of the detected landmarks are considered consistent. If this landmark detection method should be used for SLAM, the data association would likely struggle to provide suitable landmark matches. 

Further, to keep the false positive rate small, much of the geometrical details and information are filtered out, not providing much more information than the position of the landmarks and, to some extent, their size. Depending on the application, this can be sufficient. Still, the landmark detector should be able to extract as much information from the landmarks as possible, as this applies to all applications. 

The process of tuning the 1D landmark detector was complex due to the parameters being tightly coupled and unintuitive since there was no direct relation between the threshold parameter and the desired properties of the detector. The latter can be seen in \cref{fig:1D_norm_tuning_training}, where three different thresholds are shown, and compared to the chosen threshold of $1550$, a threshold of $1600$ makes some of the landmarks more consistent but also introduces a new landmark that is not consistently detected. On the other hand, with a threshold of $1500$, only one landmark is removed, but the others do not seem to get more consistent. Throughout the tuning process, it became evident that it was very hard to sort out the landmarks of the desired size, as both small and large landmarks were added or removed if the threshold was altered. It was also evident that there was a tight coupling between the smoothing parameter and the threshold. A change in the smoothing parameter implied that the range where the threshold parameter gave somewhat acceptable results vas drastically change, making the tuning more complex. 

To sum up, the 1D landmark method cannot detect landmarks consistently and, at the same time, produce an acceptable amount of false positives and is, therefore, not usable in any practical application. In addition, its tuning process is complex and unintuitive, and the best parameter set found filtered out a lot of the geometrical information about the landmarks. 

\section{2D Landmark Detector using Expert Rules}

As shown in \cref{fig:2d_result_test}, the 2D method can, to a larger extent, detect consistent or near-consistent landmarks in the data, but not all detected landmarks are consistent. From the top, the two first landmarks can be said to be somewhat inconsistently detected, but it can be argued that at least the landmark closest to the AUV is close to consistently detected. It appears that the landmark is part of a larger landmark, but by close inspection, it is not clear what is the actual landmark. In addition, landmark number four from the top appears to be close to consistent. However, it is hard to point out what would be the ground truth landmark. The remaining landmarks are consistently detected. Therefore, even though not all landmarks are detected perfectly consistently, the method overall shows acceptable performance.

The tuning process is simple and mostly intuitive, as shown in \cref{fig:2D_tuning_intensity_thres} and \cref{fig:2d_tuning_paramaters_training}, and we can easily tune the different parameters to filter out the landmarks with the wanted geometrical properties. Because of the sequential inner workings of the detector, the tuning can also be done sequentially, making it possible to tune one parameter at a time. First, the intensity is tuned to pick out all landmarks consistently, together with an acceptable amount of false positives. How different thresholds effect the consistency and amount of false positives are easily observed in \cref{fig:2D_tuning_intensity_thres}. Next, the different geometrical parameters can be tuned to filter out the landmarks with the desired geometrical properties. Both the height parameters and the fill rate threshold are easily interpretable, and it is easy to predict their effect on the results. The area filtering is a bit more complex, as the area is corrected for the effect of the grazing angle. It is, therefore, not perfectly intuitive how it will affect the landmarks because its effect varies with how far the landmarks are from the AUV. However, producing an acceptable result without intuition about how the parameter affected the result is not difficult. All in all, the tuning can be said to be simple and mostly intuitive. 

To conclude, the 2D landmark detector produces acceptable results and possesses properties that make it simple and intuitive to tune, but it has some weaknesses regarding consistent landmark detection. Further work could improve the latter by doing a new local detection around each detected landmark with a relaxed intensity threshold to improve consistency.

\section{Comparison}

Both landmark detection methods can do detection with an acceptable level of false positives but suffer, to a varying degree, from not being able to detect the detected landmarks consistently. The 1D landmark detector struggles much more with consistently detecting landmarks than the 2D landmark detector and is considered unable to use in a practical application. The 2D landmark detector, on the other hand, has a much better performance and the potential to be used in practical applications.  However, inconsistent landmarks detection will make it much more challenging to apply in a SLAM context.

Even though the 2D landmark detector has twice as many tuning parameters, it is less complex and more intuitive to tune than the 1D landmark detector. This comes from the sequential inner workings and the non-dependent tuning parameters. The tuning is also worth considering for practical applications and, again, has the 2D landmark detector potential for being used in a SLAM context. 
